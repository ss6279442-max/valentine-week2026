<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Our Valentine Journey</title>

<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
/* ====== ORIGINAL STYLES (PRESERVED) ====== */
body, html {
    margin: 0;
    padding: 0;
    font-family: 'Poppins', sans-serif;
    overflow-x: hidden;
    transition: background-color 0.8s ease;
}

.day-section {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 20px;
    min-height: 100vh;
    position: relative;
}

.day-section.active { display: flex; }

h1 {
    font-family: 'Dancing Script', cursive;
    font-size: 3.5rem;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}

h2 {
    font-size: 1.4rem;
    font-weight: 300;
    max-width: 600px;
    margin-bottom: 20px;
    line-height: 1.5;
}

.card {
    width: 320px;
    min-height: 150px;
    margin-bottom: 25px;
    perspective: 1200px;
    cursor: pointer;
}

.card-inner {
    position: relative;
    width: 100%;
    height: 160px;
    transform-style: preserve-3d;
    transition: transform 0.9s cubic-bezier(.4,.2,.2,1);
}

.card.flipped .card-inner {
    transform: rotateY(180deg);
}

.card-front, .card-back {
    position: absolute;
    inset: 0;
    border-radius: 22px;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 18px 20px;
    text-align: center;
    font-family: 'Dancing Script', cursive;
}

.card-front { font-size: 1.3rem; opacity: 0.9; font-weight: bold; }
.card-back { transform: rotateY(180deg); font-size: 1.3rem; position: relative; overflow: hidden; }

/* Card Themes */
.card1 { background: radial-gradient(circle at top, #ff4d6d, #8b0000); color: white; animation: rosePulse 3.5s infinite; }
.card2 { background: linear-gradient(135deg, #5f2c82, #49a09d); color: white; }
.card3 { background: linear-gradient(145deg, #3e2723, #795548); color: #ffecb3; animation: chocoFloat 5s ease-in-out infinite; }
.card4 { background: linear-gradient(135deg, #fff3e0, #e0c3a0); color: #5d4037; animation: teddyBounce 2.5s infinite; }
.card5 { background: linear-gradient(135deg, #c8ffd4, #faffd1); color: #1b5e20; animation: promiseGlow 3s infinite; }
.card6 { background: linear-gradient(135deg, #ff9a9e, #fad0c4); color: #880e4f; animation: hugBreath 4s infinite; }
.card7 { background: linear-gradient(135deg, #ff1744, #c2185b); color: white; animation: kissFlicker 1.8s infinite alternate; }
.card8 { background: linear-gradient(135deg, #fff1c1, #ffcc80); color: #5d4037; animation: auraPulse 3s infinite; }

@keyframes rosePulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.05); } }
@keyframes chocoFloat { 50% { transform: translateY(-12px); } }
@keyframes teddyBounce { 50% { transform: translateY(-8px) scale(1.02); } }
@keyframes promiseGlow { 70% { box-shadow: 0 0 0 18px rgba(0,255,150,0); } }
@keyframes hugBreath { 50% { transform: scale(1.06); } }
@keyframes kissFlicker { from { filter: brightness(1); } to { filter: brightness(1.25); } }
@keyframes auraPulse { 50% { box-shadow: 0 0 50px rgba(255,180,80,1); } }

.particle { position: fixed; pointer-events: none; z-index: 99; }

/* SCRATCH & METER STYLES */
.scratch-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; cursor: crosshair; z-index: 2; border-radius: 22px; }
.love-meter-container { margin-top: 30px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
.hold-heart { font-size: 3.2rem; cursor: pointer; user-select: none; animation: heartbeat 1.5s infinite; filter: drop-shadow(0 0 8px rgba(255,0,0,0.3)); }
@keyframes heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
.progress-bar { width: 200px; height: 10px; background: rgba(0,0,0,0.1); border-radius: 10px; overflow: hidden; border: 1px solid rgba(255,255,255,0.4); }
.progress-fill { width: 0%; height: 100%; background: #ff2d55; transition: width 0.1s linear; }

/* BG Colors */
body.bg-1 { background-color: #fff0f3; } body.bg-2 { background-color: #f3e5f5; }
body.bg-3 { background-color: #efebe9; } body.bg-4 { background-color: #fff8e1; }
body.bg-5 { background-color: #e8f5e9; } body.bg-6 { background-color: #fce4ec; }
body.bg-7 { background-color: #ffebee; } body.bg-8 { background-color: #fffde7; }
</style>
</head>

<body onload="init()" class="bg-1">

<section class="day-section active" id="day1">
    <h1>Rose Day</h1>
    <h2>"A flower for a flower."</h2>
    <div class="card card1">
        <div class="card-inner">
            <div class="card-front">Do you know which flower reminds me of your soul?</div>
            <div class="card-back" data-text="A rose, because you are beautiful and rare. Happy Rose Day, my love!">
                <canvas class="scratch-canvas"></canvas>
            </div>
        </div>
    </div>
    <div class="love-meter-container">
        <div class="hold-heart" onmousedown="startHold(2)" ontouchstart="startHold(2)" onmouseup="stopHold()" ontouchend="stopHold()">❤</div>
        <div class="progress-bar"><div class="progress-fill" id="fill-2"></div></div>
        <p>Hold Heart to unlock Day 2</p>
    </div>
</section>

<section class="day-section" id="day2">
    <h1>Propose Day</h1>
    <h2>"My heart has a question..."</h2>
    <div class="card card2">
        <div class="card-inner">
            <div class="card-front">If I could spend my life anywhere, do you know where it would be?</div>
            <div class="card-back" data-text="Right by your side, forever and always. Will you be mine?">
                <canvas class="scratch-canvas"></canvas>
            </div>
        </div>
    </div>
    <div class="love-meter-container">
        <div class="hold-heart" onmousedown="startHold(3)" ontouchstart="startHold(3)" onmouseup="stopHold()" ontouchend="stopHold()">❤</div>
        <div class="progress-bar"><div class="progress-fill" id="fill-3"></div></div>
    </div>
</section>

<section class="day-section" id="day3">
    <h1>Chocolate Day</h1>
    <h2>"Sweeter than cocoa."</h2>
    <div class="card card3">
        <div class="card-inner">
            <div class="card-front">What is sweeter than the finest chocolate in the world?</div>
            <div class="card-back" data-text="Your smile. It’s the only sweetness I’ll ever need!">
                <canvas class="scratch-canvas"></canvas>
            </div>
        </div>
    </div>
    <div class="love-meter-container">
        <div class="hold-heart" onmousedown="startHold(4)" ontouchstart="startHold(4)" onmouseup="stopHold()" ontouchend="stopHold()">❤</div>
        <div class="progress-bar"><div class="progress-fill" id="fill-4"></div></div>
    </div>
</section>

<section class="day-section" id="day4">
    <h1>Teddy Day</h1>
    <h2>"Cuddles & Comfort."</h2>
    <div class="card card4">
        <div class="card-inner">
            <div class="card-front">Whenever you feel lonely, do you know who is thinking of you?</div>
            <div class="card-back" data-text="Me! And this teddy is here to give you my hugs until I see you.">
                <canvas class="scratch-canvas"></canvas>
            </div>
        </div>
    </div>
    <div class="love-meter-container">
        <div class="hold-heart" onmousedown="startHold(5)" ontouchstart="startHold(5)" onmouseup="stopHold()" ontouchend="stopHold()">❤</div>
        <div class="progress-bar"><div class="progress-fill" id="fill-5"></div></div>
    </div>
</section>

<section class="day-section" id="day5">
    <h1>Promise Day</h1>
    <h2>"Words from the heart."</h2>
    <div class="card card5">
        <div class="card-inner">
            <div class="card-front">Do you know what my favorite promise to you is?</div>
            <div class="card-back" data-text="That I will choose you every single day, no matter what.">
                <canvas class="scratch-canvas"></canvas>
            </div>
        </div>
    </div>
    <div class="love-meter-container">
        <div class="hold-heart" onmousedown="startHold(6)" ontouchstart="startHold(6)" onmouseup="stopHold()" ontouchend="stopHold()">❤</div>
        <div class="progress-bar"><div class="progress-fill" id="fill-6"></div></div>
    </div>
</section>

<section class="day-section" id="day6">
    <h1>Hug Day</h1>
    <h2>"A warm embrace."</h2>
    <div class="card card6">
        <div class="card-inner">
            <div class="card-front">If you were here right now, do you know what I'd do?</div>
            <div class="card-back" data-text="I'd hold you so tight and never let go. Sending a big hug!">
                <canvas class="scratch-canvas"></canvas>
            </div>
        </div>
    </div>
    <div class="love-meter-container">
        <div class="hold-heart" onmousedown="startHold(7)" ontouchstart="startHold(7)" onmouseup="stopHold()" ontouchend="stopHold()">❤</div>
        <div class="progress-bar"><div class="progress-fill" id="fill-7"></div></div>
    </div>
</section>

<section class="day-section" id="day7">
    <h1>Kiss Day</h1>
    <h2>"Sparkling moments."</h2>
    <div class="card card7">
        <div class="card-inner">
            <div class="card-front">Do you know what a kiss from you feels like?</div>
            <div class="card-back" data-text="Like magic and a million stars exploding. You are my dream!">
                <canvas class="scratch-canvas"></canvas>
            </div>
        </div>
    </div>
    <div class="love-meter-container">
        <div class="hold-heart" onmousedown="startHold(8)" ontouchstart="startHold(8)" onmouseup="stopHold()" ontouchend="stopHold()">❤</div>
        <div class="progress-bar"><div class="progress-fill" id="fill-8"></div></div>
    </div>
</section>

<section class="day-section" id="day8">
    <h1>Valentine's Day</h1>
    <h2>"My whole world."</h2>
    <div class="card card8">
        <div class="card-inner">
            <div class="card-front">After these 8 days, do you know how much I love you?</div>
            <div class="card-back" data-text="More than words can say. Happy Valentine’s Day to my whole world!">
                <canvas class="scratch-canvas"></canvas>
            </div>
        </div>
    </div>
    <div class="love-meter-container">
        <div class="hold-heart" onclick="location.reload()" style="animation:none; font-size:1.8rem;">Start Our Journey Again? ❤</div>
    </div>
</section>

<script>
let holdInterval;
let progress = 0;
const MAX_PARTICLES = 45;
const HEART_COLORS = ['#ff2d55', '#ff5fa2', '#ff99cc', '#ff1744', '#ff6f91'];

function createParticle() {
    if (document.querySelectorAll('.particle').length >= MAX_PARTICLES) return;
    const heart = document.createElement('div');
    heart.className = 'particle';
    heart.innerHTML = '❤';
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.fontSize = (Math.random() * 12 + 14) + 'px';
    heart.style.color = HEART_COLORS[Math.floor(Math.random() * HEART_COLORS.length)];
    document.body.appendChild(heart);
    heart.animate([{ transform: 'translateY(0)', opacity: 0.85 }, { transform: 'translateY(-85vh)', opacity: 0 }], { duration: 5200, easing: 'linear' });
    setTimeout(() => heart.remove(), 5200);
}

function setupCards() {
    document.querySelectorAll('.card').forEach(card => {
        const back = card.querySelector('.card-back');
        const text = back.dataset.text;
        card.addEventListener('click', () => {
            if(!card.classList.contains('flipped')) {
                card.classList.add('flipped');
                typeText(back, text);
                initScratch(back.querySelector('.scratch-canvas'));
            }
        });
    });
}

function typeText(el, text) {
    const node = document.createTextNode("");
    el.appendChild(node);
    let i = 0;
    const timer = setInterval(() => {
        node.textContent += text[i++];
        if (i >= text.length) clearInterval(timer);
    }, 40);
}

function initScratch(canvas) {
    if(!canvas) return;
    const ctx = canvas.getContext('2d');
    const parent = canvas.parentElement;
    canvas.width = parent.offsetWidth;
    canvas.height = parent.offsetHeight;
    
    // Colorful Foil Logic
    const foilColors = ['#ff4d6d', '#5f2c82', '#3e2723', '#e0c3a0', '#1b5e20', '#ff9a9e', '#ff1744', '#ffcc80'];
    const dayIdx = parseInt(document.body.className.replace('bg-', '')) - 1;
    ctx.fillStyle = foilColors[dayIdx] || '#C0C0C0';
    
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.globalCompositeOperation = 'destination-out';

    function scratch(e) {
        const rect = canvas.getBoundingClientRect();
        const x = (e.pageX || e.touches[0].pageX) - rect.left;
        const y = (e.pageY || e.touches[0].pageY) - rect.top;
        ctx.beginPath(); ctx.arc(x, y, 25, 0, Math.PI * 2); ctx.fill();
    }
    canvas.addEventListener('mousemove', scratch);
    canvas.addEventListener('touchmove', scratch);
}

function startHold(nextId) {
    progress = 0;
    const fill = document.getElementById('fill-' + nextId);
    holdInterval = setInterval(() => {
        progress += 2;
        fill.style.width = progress + '%';
        if (progress >= 100) { clearInterval(holdInterval); changeDay(nextId); }
    }, 30);
}

function stopHold() {
    clearInterval(holdInterval);
    document.querySelectorAll('.progress-fill').forEach(f => f.style.width = '0%');
}

function changeDay(id) {
    document.querySelectorAll('.day-section').forEach(s => s.classList.remove('active'));
    document.getElementById('day' + id).classList.add('active');
    document.body.className = 'bg-' + id;
    for(let i=0; i<10; i++) createParticle();
}

function init() {
    setupCards();
    setInterval(createParticle, 550);
}
</script>

</body>
</html>
